import{r as t,h as s}from"./p-6450b217.js";class e{addUser(){alert("Add user in DB service")}getUser(){alert("Get user info from DB service")}}class i{saveShoppingCart(t){alert("Save Shopping Cart: "+t)}sell(t){alert("Sell: "+t)}buy(t){alert("Buy "+t)}}class n{constructor(){this.uid=Math.floor(1e7*Math.random())}getUID(){return"Command UID: "+this.uid}}class c extends n{constructor(t){super(),this.service=t}execute(){this.service.addUser()}}class h extends n{constructor(t){super(),this.service=t}execute(){this.service.getUser()}}class a extends n{constructor(t){super(),this.service=t}execute(t){this.service.sell(t)}}class r extends n{constructor(t){super(),this.service=t}execute(t){this.service.buy(t)}}class o extends n{constructor(t){super(),this.service=t}execute(t){this.service.saveShoppingCart(t)}}class l{constructor(){this.commands=[]}executeCommand(t,s){this.commands.push(t),t.execute(s)}get getCommands(){return this.commands}}class u{constructor(){this.uid=Math.floor(1e7*Math.random()),this.timestamp=(new Date).getTime()}getUID(){return"Command UID: "+this.uid}}class d extends u{constructor(t,s){super(),this.service=t,this.data=s,this.order=2}execute(){this.service.createTicket(this.data)}}class m extends u{constructor(t,s){super(),this.service=t,this.data=s,this.order=1}execute(){this.service.createAddress(this.data)}}class p extends u{constructor(t,s){super(),this.service=t,this.data=s,this.order=3}execute(){this.service.closeTicket(this.data)}}class x{createTicket(t){alert("create ticket "+t.id)}async createAddress(t){alert("create address "+t.id)}async closeTicket(t){alert("close ticket "+t.id)}}class b{constructor(){this.commands=[]}add(t){this.commands.push(t)}async executeCommand(){var t;this.commands=this.commands.sort((t="order",function(s,e){if(!s.hasOwnProperty(t)||!e.hasOwnProperty(t))return 0;const i=s[t],n=e[t];let c=0;return i>n?c=1:i<n&&(c=-1),c}));for(const e of this.commands)try{await e.execute()}catch(s){console.log(s)}}}class C{constructor(){this.commands=[]}push(t){this.commands.push(t)}pop(){return this.commands.pop()}get length(){return this.commands.length}}class g{drawLine(){this.content="Draw line"}drawCircle(){this.content="Draw Circle"}paintBlue(){this.content="Paint Blue"}paintRed(){this.content="Paint Red"}get getContent(){return this.content}set setContent(t){this.content=t}}class w{constructor(){this.uid=Math.floor(1e7*Math.random())}getUID(){return"Command UID: "+this.uid}}class k extends w{}class y extends k{constructor(t,s){super(),this.doc=t,this.history=s}execute(){this.prevContent=this.doc.getContent,this.doc.drawLine(),this.history.push(this)}unexecute(){this.doc.setContent=this.prevContent}}class v extends k{constructor(t,s){super(),this.doc=t,this.history=s}execute(){this.prevContent=this.doc.getContent,this.doc.drawCircle(),this.history.push(this)}unexecute(){this.doc.setContent=this.prevContent}}class D extends k{constructor(t,s){super(),this.doc=t,this.history=s}execute(){this.prevContent=this.doc.getContent,this.doc.paintBlue(),this.history.push(this)}unexecute(){this.doc.setContent=this.prevContent}}class U extends k{constructor(t,s){super(),this.doc=t,this.history=s}execute(){this.prevContent=this.doc.getContent,this.doc.paintRed(),this.history.push(this)}unexecute(){this.doc.setContent=this.prevContent}}class S extends w{constructor(t){super(),this.history=t}execute(){this.history.length>0&&this.history.pop().unexecute()}}const f=class{constructor(s){t(this,s),this.userDBService=new e,this.shoppingService=new i,this.button=new l,this.canvasHistory=new C,this.doc=new g,this.CLService=new x,this.CommandManager=new b}render(){return s("div",{class:"margin20"},s("h3",null,"Command Pattern"),s("h6",{class:"grayHint"},"- Turns a request into an object and execute any operation such as delay, queue or undo."),s("h6",{class:"grayHint"},"- 요청을 하나의 객체로 만들어 저장한 다음 여러가지 요청을 실행, 지연, 순서대로 실행, 실행 취소 등의 작업을 할 수 있다."),s("h5",null,"Example 1) User DB Service & Shopping Service"),s("button",{class:"btn margin20",onClick:()=>this.addUser()},"Add User"),s("button",{class:"btn margin20",onClick:()=>this.getUser()},"Get User Info"),s("input",{ref:t=>this.items=t,type:"text",placeholder:"Type items you need to sell/buy/save."}),s("button",{class:"btn margin20 cyan",onClick:()=>this.sell()},"Sell"),s("button",{class:"btn margin20 cyan",onClick:()=>this.buy()},"Buy"),s("button",{class:"btn margin20 cyan",onClick:()=>this.saveCart()},"Save Cart"),s("h5",null,"Example 2) Canvas Editor - Undo Mechanism"),s("button",{class:"btn margin20 blue",onClick:()=>this.circle()},"Draw a circle"),s("button",{class:"btn margin20 blue",onClick:()=>this.line()},"Draw a line"),s("button",{class:"btn margin20 blue",onClick:()=>this.red()},"Paint red"),s("button",{class:"btn margin20 blue",onClick:()=>this.blue()},"Paint blue"),s("button",{class:"btn margin20 red",onClick:()=>this.undo()},"Undo"),s("div",{class:"resultDiv margin20"},s("h6",null,"** Canvas **"),this.currentCanvas),s("h5",null,"Example 3) Add command and execute all commands at once"),s("button",{class:"btn margin20",onClick:()=>this.createTicket()},"Create ticket"),s("button",{class:"btn margin20",onClick:()=>this.createAddress()},"Create address"),s("button",{class:"btn margin20",onClick:()=>this.closeTicket()},"Close ticket"),s("button",{class:"btn margin20 teal accent-2 black-text",onClick:()=>this.executeAll()},"Execute Commands"),s("pattern-photos",{uml:"command-uml.png",imp:"command-i.png",cl:"command.png"}))}addUser(){const t=new c(this.userDBService);this.button.executeCommand(t),console.log(this.button.getCommands)}getUser(){const t=new h(this.userDBService);this.button.executeCommand(t),console.log(this.button.getCommands)}sell(){const t=new a(this.shoppingService);this.button.executeCommand(t,this.items.value),console.log(this.button.getCommands)}buy(){const t=new r(this.shoppingService);this.button.executeCommand(t,this.items.value),console.log(this.button.getCommands)}saveCart(){const t=new o(this.shoppingService);this.button.executeCommand(t,this.items.value),console.log(this.button.getCommands)}circle(){new v(this.doc,this.canvasHistory).execute(),this.updateCanvasCommand()}line(){new y(this.doc,this.canvasHistory).execute(),this.updateCanvasCommand()}red(){new U(this.doc,this.canvasHistory).execute(),this.updateCanvasCommand()}blue(){new D(this.doc,this.canvasHistory).execute(),this.updateCanvasCommand()}undo(){new S(this.canvasHistory).execute(),this.updateCanvasCommand()}updateCanvasCommand(){this.currentCanvas=this.doc.getContent}createTicket(){const t=new d(this.CLService,{id:"ticket1"});this.CommandManager.add(t)}closeTicket(){const t=new p(this.CLService,{id:"ticket2"});this.CommandManager.add(t)}createAddress(){const t=new m(this.CLService,{id:"address1"});this.CommandManager.add(t)}executeAll(){this.CommandManager.executeCommand()}static get style(){return"STYLE_TEXT_PLACEHOLDER:app-command"}};export{f as app_command};