var __extends=this&&this.__extends||function(){var t=function(e,n){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)if(e.hasOwnProperty(n))t[n]=e[n]};return t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();var __awaiter=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function c(t){try{s(r.next(t))}catch(e){i(e)}}function u(t){try{s(r["throw"](t))}catch(e){i(e)}}function s(t){t.done?n(t.value):o(t.value).then(c,u)}s((r=r.apply(t,e||[])).next())}))};var __generator=this&&this.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol==="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(t){return function(e){return s([t,e])}}function s(c){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,o&&(i=c[0]&2?o["return"]:c[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;if(o=0,i)c=[c[0]&2,i.value];switch(c[0]){case 0:case 1:i=c;break;case 4:n.label++;return{value:c[1],done:false};case 5:n.label++;o=c[1];c=[0];continue;case 7:c=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1];i=c;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(c);break}if(i[2])n.ops.pop();n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u];o=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:true}}};System.register(["./p-70e1058c.system.js"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.r;n=t.h}],execute:function(){var r=function(){function t(){}t.prototype.addUser=function(){alert("Add user in DB service")};t.prototype.getUser=function(){alert("Get user info from DB service")};return t}();var o=function(){function t(){}t.prototype.saveShoppingCart=function(t){alert("Save Shopping Cart: "+t)};t.prototype.sell=function(t){alert("Sell: "+t)};t.prototype.buy=function(t){alert("Buy "+t)};return t}();var i=function(){function t(){this.uid=Math.floor(Math.random()*1e7)}t.prototype.getUID=function(){return"Command UID: "+this.uid};return t}();var c=function(t){__extends(e,t);function e(e){var n=t.call(this)||this;n.service=e;return n}e.prototype.execute=function(){this.service.addUser()};return e}(i);var u=function(t){__extends(e,t);function e(e){var n=t.call(this)||this;n.service=e;return n}e.prototype.execute=function(){this.service.getUser()};return e}(i);var s=function(t){__extends(e,t);function e(e){var n=t.call(this)||this;n.service=e;return n}e.prototype.execute=function(t){this.service.sell(t)};return e}(i);var a=function(t){__extends(e,t);function e(e){var n=t.call(this)||this;n.service=e;return n}e.prototype.execute=function(t){this.service.buy(t)};return e}(i);var h=function(t){__extends(e,t);function e(e){var n=t.call(this)||this;n.service=e;return n}e.prototype.execute=function(t){this.service.saveShoppingCart(t)};return e}(i);var p=function(){function t(){this.commands=[]}t.prototype.executeCommand=function(t,e){this.commands.push(t);t.execute(e)};Object.defineProperty(t.prototype,"getCommands",{get:function(){return this.commands},enumerable:true,configurable:true});return t}();var l=function(){function t(){this.uid=Math.floor(Math.random()*1e7);this.timestamp=(new Date).getTime()}t.prototype.getUID=function(){return"Command UID: "+this.uid};return t}();var d=function(t){__extends(e,t);function e(e,n){var r=t.call(this)||this;r.service=e;r.data=n;r.order=2;return r}e.prototype.execute=function(){this.service.createTicket(this.data)};return e}(l);var f=function(t){__extends(e,t);function e(e,n){var r=t.call(this)||this;r.service=e;r.data=n;r.order=1;return r}e.prototype.execute=function(){this.service.createAddress(this.data)};return e}(l);var m=function(t){__extends(e,t);function e(e,n){var r=t.call(this)||this;r.service=e;r.data=n;r.order=3;return r}e.prototype.execute=function(){this.service.closeTicket(this.data)};return e}(l);var v=function(){function t(){}t.prototype.createTicket=function(t){alert("create ticket "+t.id)};t.prototype.createAddress=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){alert("create address "+t.id);return[2]}))}))};t.prototype.closeTicket=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){alert("close ticket "+t.id);return[2]}))}))};return t}();var y=function(){function t(){this.commands=[]}t.prototype.add=function(t){this.commands.push(t)};t.prototype.executeCommand=function(){return __awaiter(this,void 0,void 0,(function(){var t,e,n,r;return __generator(this,(function(o){switch(o.label){case 0:this.commands=this.commands.sort(C("order"));t=0,e=this.commands;o.label=1;case 1:if(!(t<e.length))return[3,6];n=e[t];o.label=2;case 2:o.trys.push([2,4,,5]);return[4,n.execute()];case 3:o.sent();return[3,5];case 4:r=o.sent();console.log(r);return[3,5];case 5:t++;return[3,1];case 6:return[2]}}))}))};return t}();function C(t){return function e(n,r){if(!n.hasOwnProperty(t)||!r.hasOwnProperty(t))return 0;var o=n[t];var i=r[t];var c=0;if(o>i){c=1}else if(o<i){c=-1}return c}}var b=function(){function t(){this.commands=[]}t.prototype.push=function(t){this.commands.push(t)};t.prototype.pop=function(){return this.commands.pop()};Object.defineProperty(t.prototype,"length",{get:function(){return this.commands.length},enumerable:true,configurable:true});return t}();var g=function(){function t(){}t.prototype.drawLine=function(){this.content="Draw line"};t.prototype.drawCircle=function(){this.content="Draw Circle"};t.prototype.paintBlue=function(){this.content="Paint Blue"};t.prototype.paintRed=function(){this.content="Paint Red"};Object.defineProperty(t.prototype,"getContent",{get:function(){return this.content},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"setContent",{set:function(t){this.content=t},enumerable:true,configurable:true});return t}();var x=function(){function t(){this.uid=Math.floor(Math.random()*1e7)}t.prototype.getUID=function(){return"Command UID: "+this.uid};return t}();var _=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(x);var w=function(t){__extends(e,t);function e(e,n){var r=t.call(this)||this;r.doc=e;r.history=n;return r}e.prototype.execute=function(){this.prevContent=this.doc.getContent;this.doc.drawLine();this.history.push(this)};e.prototype.unexecute=function(){this.doc.setContent=this.prevContent};return e}(_);var k=function(t){__extends(e,t);function e(e,n){var r=t.call(this)||this;r.doc=e;r.history=n;return r}e.prototype.execute=function(){this.prevContent=this.doc.getContent;this.doc.drawCircle();this.history.push(this)};e.prototype.unexecute=function(){this.doc.setContent=this.prevContent};return e}(_);var S=function(t){__extends(e,t);function e(e,n){var r=t.call(this)||this;r.doc=e;r.history=n;return r}e.prototype.execute=function(){this.prevContent=this.doc.getContent;this.doc.paintBlue();this.history.push(this)};e.prototype.unexecute=function(){this.doc.setContent=this.prevContent};return e}(_);var D=function(t){__extends(e,t);function e(e,n){var r=t.call(this)||this;r.doc=e;r.history=n;return r}e.prototype.execute=function(){this.prevContent=this.doc.getContent;this.doc.paintRed();this.history.push(this)};e.prototype.unexecute=function(){this.doc.setContent=this.prevContent};return e}(_);var U=function(t){__extends(e,t);function e(e){var n=t.call(this)||this;n.history=e;return n}e.prototype.execute=function(){this.history.length>0&&this.history.pop().unexecute()};return e}(x);var P=t("app_command",function(){function t(t){e(this,t);this.userDBService=new r;this.shoppingService=new o;this.button=new p;this.canvasHistory=new b;this.doc=new g;this.CLService=new v;this.CommandManager=new y}t.prototype.render=function(){var t=this;return n("div",{class:"margin20"},n("h3",null,"Command Pattern"),n("h6",{class:"grayHint"},"- Turns a request into an object and execute any operation such as delay, queue or undo."),n("h6",{class:"grayHint"},"- 요청을 하나의 객체로 만들어 저장한 다음 여러가지 요청을 실행, 지연, 순서대로 실행, 실행 취소 등의 작업을 할 수 있다."),n("h5",null,"Example 1) User DB Service & Shopping Service"),n("button",{class:"btn margin20",onClick:function(e){return t.addUser()}},"Add User"),n("button",{class:"btn margin20",onClick:function(e){return t.getUser()}},"Get User Info"),n("input",{ref:function(e){return t.items=e},type:"text",placeholder:"Type items you need to sell/buy/save."}),n("button",{class:"btn margin20 cyan",onClick:function(e){return t.sell()}},"Sell"),n("button",{class:"btn margin20 cyan",onClick:function(e){return t.buy()}},"Buy"),n("button",{class:"btn margin20 cyan",onClick:function(e){return t.saveCart()}},"Save Cart"),n("h5",null,"Example 2) Canvas Editor - Undo Mechanism"),n("button",{class:"btn margin20 blue",onClick:function(e){return t.circle()}},"Draw a circle"),n("button",{class:"btn margin20 blue",onClick:function(e){return t.line()}},"Draw a line"),n("button",{class:"btn margin20 blue",onClick:function(e){return t.red()}},"Paint red"),n("button",{class:"btn margin20 blue",onClick:function(e){return t.blue()}},"Paint blue"),n("button",{class:"btn margin20 red",onClick:function(e){return t.undo()}},"Undo"),n("div",{class:"resultDiv margin20"},n("h6",null,"** Canvas **"),this.currentCanvas),n("h5",null,"Example 3) Add command and execute all commands at once"),n("button",{class:"btn margin20",onClick:function(e){return t.createTicket()}},"Create ticket"),n("button",{class:"btn margin20",onClick:function(e){return t.createAddress()}},"Create address"),n("button",{class:"btn margin20",onClick:function(e){return t.closeTicket()}},"Close ticket"),n("button",{class:"btn margin20 teal accent-2 black-text",onClick:function(e){return t.executeAll()}},"Execute Commands"),n("pattern-photos",{uml:"command-uml.png",imp:"command-i.png",cl:"command.png"}))};t.prototype.addUser=function(){var t=new c(this.userDBService);this.button.executeCommand(t);console.log(this.button.getCommands)};t.prototype.getUser=function(){var t=new u(this.userDBService);this.button.executeCommand(t);console.log(this.button.getCommands)};t.prototype.sell=function(){var t=new s(this.shoppingService);this.button.executeCommand(t,this.items.value);console.log(this.button.getCommands)};t.prototype.buy=function(){var t=new a(this.shoppingService);this.button.executeCommand(t,this.items.value);console.log(this.button.getCommands)};t.prototype.saveCart=function(){var t=new h(this.shoppingService);this.button.executeCommand(t,this.items.value);console.log(this.button.getCommands)};t.prototype.circle=function(){var t=new k(this.doc,this.canvasHistory);t.execute();this.updateCanvasCommand()};t.prototype.line=function(){var t=new w(this.doc,this.canvasHistory);t.execute();this.updateCanvasCommand()};t.prototype.red=function(){var t=new D(this.doc,this.canvasHistory);t.execute();this.updateCanvasCommand()};t.prototype.blue=function(){var t=new S(this.doc,this.canvasHistory);t.execute();this.updateCanvasCommand()};t.prototype.undo=function(){var t=new U(this.canvasHistory);t.execute();this.updateCanvasCommand()};t.prototype.updateCanvasCommand=function(){this.currentCanvas=this.doc.getContent};t.prototype.createTicket=function(){var t=new d(this.CLService,{id:"ticket1"});this.CommandManager.add(t)};t.prototype.closeTicket=function(){var t=new m(this.CLService,{id:"ticket2"});this.CommandManager.add(t)};t.prototype.createAddress=function(){var t=new f(this.CLService,{id:"address1"});this.CommandManager.add(t)};t.prototype.executeAll=function(){this.CommandManager.executeCommand()};Object.defineProperty(t,"style",{get:function(){return"STYLE_TEXT_PLACEHOLDER:app-command"},enumerable:true,configurable:true});return t}())}}}));